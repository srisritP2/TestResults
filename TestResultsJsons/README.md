# TestResultsJsons Directory

This directory contains all cucumber test report files and their index.

## Directory Structure

```
TestResultsJsons/
├── index.json                    # Main index of all reports (REQUIRED)
├── stats.json                    # Aggregated statistics (REQUIRED)
├── generate-index-enhanced.js    # Script to regenerate index
├── *.json                        # Individual report files
└── .backups/                     # Backup directory for deleted reports
```

## Important Files

### 1. index.json
- **Purpose**: Lists all available reports with metadata
- **Required**: YES - Without this, no reports will show in the collection
- **Location**: Must be in `TestResultsJsons/` directory
- **Generated by**: `generate-index-enhanced.js` script

### 2. stats.json
- **Purpose**: Contains aggregated statistics across all reports
- **Required**: YES - Used for dashboard statistics
- **Location**: Must be in `TestResultsJsons/` directory
- **Generated by**: `generate-index-enhanced.js` script

## Adding New Reports

### Method 1: Using Upload Feature (Recommended)
1. Click "Upload Report" button on the landing page
2. Select your cucumber JSON file
3. After upload, click the cloud/publish icon on the report card
4. **IMPORTANT**: Save both downloaded files to this directory:
   - `index.json` → Save to `TestResultsJsons/index.json`
   - `stats.json` → Save to `TestResultsJsons/stats.json`
5. Commit and push all changes to git

### Method 2: Manual File Addition
1. Copy your report JSON file to this directory
2. Run the index generator:
   ```bash
   cd cucumber-report-viewer/public/TestResultsJsons
   node generate-index-enhanced.js
   ```
3. Commit and push all changes to git

## Common Issues & Solutions

### Issue: "No reports showing in collection"
**Cause**: Missing or outdated `index.json`
**Solution**: 
1. Ensure `index.json` exists in this directory
2. Run `node generate-index-enhanced.js` to regenerate
3. Push changes to GitHub

### Issue: "Report not loading when clicked"
**Cause**: Report file not in correct directory or not pushed to GitHub
**Solution**:
1. Verify report file is in `TestResultsJsons/` directory (not in `public/`)
2. Run `node generate-index-enhanced.js` to update index
3. Commit and push ALL files including the report JSON

### Issue: "New report not appearing after push"
**Cause**: `index.json` not updated or not pushed
**Solution**:
1. Run `node generate-index-enhanced.js`
2. Commit both the report file AND updated `index.json`
3. Push to GitHub
4. Wait 2-3 minutes for GitHub Pages deployment

## File Naming Convention

Reports are automatically renamed by the index generator to follow this pattern:
```
[Feature-Name]-[Timestamp].json
```

Example:
```
Admin-Client-Settings-Page-Test-Scenarios-2025-11-07T13-29-03-792Z.json
```

## Regenerating Index

Whenever you add, remove, or modify report files, regenerate the index:

```bash
cd cucumber-report-viewer/public/TestResultsJsons
node generate-index-enhanced.js
```

This will:
- ✅ Scan all JSON files in the directory
- ✅ Extract metadata from each report
- ✅ Generate updated `index.json`
- ✅ Generate updated `stats.json`
- ✅ Rename files following naming convention
- ✅ Calculate aggregated statistics

## GitHub Pages Deployment

After making changes:

1. **Add all changes**:
   ```bash
   git add .
   ```

2. **Commit**:
   ```bash
   git commit -m "Add new test report and update index"
   ```

3. **Push**:
   ```bash
   git push origin main
   ```

4. **Wait**: GitHub Pages takes 2-3 minutes to deploy

## Checklist for Adding Reports

- [ ] Report JSON file is in `TestResultsJsons/` directory (not `public/`)
- [ ] Ran `node generate-index-enhanced.js`
- [ ] `index.json` is updated
- [ ] `stats.json` is updated
- [ ] All files committed to git
- [ ] Changes pushed to GitHub
- [ ] Waited 2-3 minutes for deployment
- [ ] Verified report appears in collection
- [ ] Verified report loads when clicked

## Notes

- Always place report files directly in `TestResultsJsons/` directory
- Never place reports in the parent `public/` directory
- Always regenerate index after adding/removing reports
- Always push both report files AND index files together
- GitHub Pages deployment takes 2-3 minutes
