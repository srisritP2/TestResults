const fs=require("fs"),path=require("path"),reportsDir=__dirname,uploadedFiles=fs.readdirSync(reportsDir).filter(e=>e.startsWith("report-")&&e.endsWith(".json")&&!e.includes("100percent"));0===uploadedFiles.length&&(console.log("‚úÖ No new uploaded reports to process"),process.exit(0)),console.log(`\nüì§ Found ${uploadedFiles.length} uploaded report(s) to process:\n`),uploadedFiles.forEach(e=>{console.log(`Processing: ${e}`);const t=path.join(reportsDir,e),r=fs.readFileSync(t,"utf8");try{const e=JSON.parse(r);if(!Array.isArray(e)||0===e.length)return void console.log("   ‚ùå Invalid format - not a Cucumber report array");if(e[0].timestamp&&e[0].renames)return console.log("   ‚ùå Rename log file - deleting"),void fs.unlinkSync(t);let o=null;e[0].elements&&e[0].elements[0]&&e[0].elements[0].start_timestamp&&(o=new Date(e[0].elements[0].start_timestamp)),o||(console.log("   ‚ö†Ô∏è  No timestamp found - using current time"),o=new Date);const n=o.getFullYear(),s=String(o.getMonth()+1).padStart(2,"0"),a=String(o.getDate()).padStart(2,"0"),l=String(o.getHours()).padStart(2,"0"),i=String(o.getMinutes()).padStart(2,"0"),d=String(o.getSeconds()).padStart(2,"0"),c=`gct-${n}${s}${a}-${l}${i}${d}.json`,p=path.join(reportsDir,c);fs.renameSync(t,p),console.log(`   ‚úÖ Renamed to: ${c}`)}catch(o){console.log(`   ‚ùå Error: ${o.message}`)}}),console.log("\n‚ú® Processing complete! Now regenerate the index:\n   node generate-index-enhanced.js\n");