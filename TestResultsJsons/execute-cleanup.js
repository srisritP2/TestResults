const fs=require("fs"),path=require("path"),reportsDir=__dirname,cleanupFile=path.join(reportsDir,".cleanup-list.json");fs.existsSync(cleanupFile)||(console.log("âŒ No cleanup list found. Run validate-and-cleanup.js first."),process.exit(1));const{toDelete,duplicateGroups}=JSON.parse(fs.readFileSync(cleanupFile,"utf8"));console.log("\nğŸ—‘ï¸  CLEANUP EXECUTION\n");let deletedCount=0;toDelete&&toDelete.length>0&&(console.log(`Deleting ${toDelete.length} invalid/empty files...`),toDelete.forEach(e=>{const o=path.join(reportsDir,e);fs.existsSync(o)&&(fs.unlinkSync(o),console.log(`   âœ“ Deleted: ${e}`),deletedCount++)}),console.log("")),duplicateGroups&&duplicateGroups.length>0&&(console.log(`Processing ${duplicateGroups.length} duplicate groups...\n`),duplicateGroups.forEach((e,o)=>{console.log(`Group ${o+1}: ${e[0].steps} steps, ${e[0].scenarios} scenarios`);const l=e.sort((e,o)=>o.file.localeCompare(e.file)),n=l[0],t=l.slice(1);console.log(`   âœ“ Keeping: ${n.file}`),console.log(`   âœ— Removing ${t.length} duplicates:`),t.forEach(e=>{const o=path.join(reportsDir,e.file);fs.existsSync(o)&&(fs.unlinkSync(o),console.log(`      - ${e.file}`),deletedCount++)}),console.log("")})),console.log(`\nâœ… Cleanup complete! Deleted ${deletedCount} files.`),console.log("\nğŸ“ Next step: Regenerate index with: node generate-index-enhanced.js\n"),fs.unlinkSync(cleanupFile);